<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stop-watch</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/stop-watch.css">
</head>
<body>
    <div class="container">
        <h1>タイマーウォッチアプリ</h1>

        <p id="timer">00:00:00</p>
    
        <div>   
          <button id="start_stop" class="btn btn-lg 
          btn-primary">START</button>
        </div>
    </div>

    <!-- <button id="btn">ボタン</button>


<!-- <div class="box">
    <div class="box1">
        box1
    </div>
    <div class="box2">
        box2
    </div>
</div> -->


<script> 
    //0を追加する
    // var addZero = function(value){    //addZeroという変数を宣言
    //     if(value < 10){   //< = 比較演算子
    //         value = '0' + value;
    //     }
    //     return value;　　//返り値、戻り値
    // }
     
    // document.getElementById('start_stop').addEventListener('click', 
    // function(){

    
    //     var now = new Date();
    //     var seconds = now.getSeconds();
    //     seconds = addZero(seconds);

    //     var minutes = now.getMinutes();
    //     minutes = addZero(minutes);

    //     var hours = now.getHours();
    //     hours = addZero(hours);
    //     document.getElementById('timer').innerHTML = hours + ':' + minutes + ':' + seconds;
    // });



    // var btn = document.getElementById('btn');

    // btn.addEventListener('click', function(){
    //        console.log('this is clicked')
    // },false);
    
    var start;
    var time_id;


    document.getElementById('start_stop').addEventListener
    ('click', function(){
        if(this.innerHTML === 'START'){
            start = new Date();
            timer_id  = setInterval(goTimer, 10);   //setIntervalで特定の処理を一定時間繰り返す
            //STOPボタンにする
            this.innerHTML = 'STOP';
            this.classList.remove('btn-primary')
            this.classList.add('btn-danger');
        }else {
            clearInterval(timer_id);

           //STARTボタンに戻す
           this.innerHTML  = 'START';
           this.classList.remove('btn-danger');
           this.classList.add('btn-primary');
        }
    });

    var addZero =  function(value){
        if(value < 10){
            value = '0' + value;
        }
        return value;
    } 

    var goTimer = function(){
        var now = new Date();


        var milli = now.getTime()  -   start.getTime();
        var seconds = Math.floor(milli / 1000);
        var minutes = Math.floor(seconds / 60);  
        var hours = Math.floor(minutes /60);
       //Math.floor() 関数は与えられた数値以下の最大の整数を返します。

       seconds = seconds - minutes * 60;
       minutes = minutes  - hours * 60;

       hours = addZero(hours);
       minutes = addZero(minutes);
       seconds  = addZero(seconds);

        // document.getElementById('timer').innerHTML = 
        // now.getTime() - start.getTime();
        document.getElementById('timer').innerHTML = hours + ':' + minutes + ':' + seconds;

    }
    

</script>
</body>
</html>